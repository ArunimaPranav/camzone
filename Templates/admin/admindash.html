{% extends 'admin/admin.html' %}
{% load static %}
{% block title %} Dashboard {% endblock %}
{% block content %}

<div class="container-fluid py-4">
  <div class="row">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Revenue</p>
                <h5 class="font-weight-bolder">
                  ₹{{total_revenue2}}
                </h5>
              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Users</p>
                <h5 class="font-weight-bolder">
                  {{u_count}}
                </h5>
              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Products</p>
                <h5 class="font-weight-bolder">
                  {{p_count}}
                </h5>
                
              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
                <i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
      <div class="card">
        <div class="card-body p-3">
          <div class="row">
            <div class="col-8">
              <div class="numbers">
                <p class="text-sm mb-0 text-uppercase font-weight-bold">Orders</p>
                <h5 class="font-weight-bolder">
                  {{c2}}
                </h5>
                <p class="mb-0">
                  <span class="text-success text-sm font-weight-bolder">{{c1}}</span> Cancelled
                </p>
              </div>
            </div>
            <div class="col-4 text-end">
              <div class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle">
                <i class="ni ni-cart text-lg opacity-10" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-lg-12 mb-lg-0 mb-4">
      <div class="card z-index-2 h-100">
        <div class="card-header pb-0 pt-3 bg-transparent">
          <h6 class="text-capitalize">Overview</h6>
        </div>
        <div class="card-body p-3 d-flex">
          <div class="" id="container" style="width:300px;">
            <canvas id="myChart"></canvas>
            <strong>Customers : {{total_user}}</strong>
          </div>
          <div class="" id="container" style="width:300px;">
            <canvas id="myChart2"></canvas>
            <strong>Revenue </strong>
          </div>
        </div>

      </div>
    </div> 
  </div>
  <footer class="footer pt-3  ">
    <div class="container-fluid">
      <div class="row align-items-center justify-content-lg-between">
        <div class="col-lg-6 mb-lg-0 mb-4">
          <div class="copyright text-center text-sm text-muted text-lg-start">
            © <script>
              document.write(new Date().getFullYear())
            </script>,
            made  <i class="fa fa-heart"></i> by Arunima
          </div>
        </div>
        <
      </div>
    </div>
  </footer>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script> var c_config = {
  type: 'doughnut',
  data: {
    datasets: [{
      data: {{ data1|safe }},
      backgroundColor: [
      'rgb(0, 115, 230)',
      'rgb(255, 170, 0)',
      ],
        borderWidth: 1 ,
      label: 'Customer'
    }],
    labels: {{ data1_label|safe }}
  },
  options: {
    responsive: true
  }
};

var o_config = {
    type: 'doughnut',
    data: {
      datasets: [{
        data: {{ data2|safe }},
        backgroundColor: [
        'rgb(255, 117, 26)',
        'rgb(153, 0, 204)',
        'rgba(255, 159, 64, 1)',
        ],
          borderWidth: 1 ,
        label: 'revenue'
      }],
      labels: {{ data2_label|safe }}
    },
    options: {
      responsive: true
    }
  };

window.onload = function() {
    var c_ctx = document.getElementById('myChart').getContext('2d');
    window.myPie1 = new Chart(c_ctx, c_config);

    var o_ctx = document.getElementById('myChart2').getContext('2d');
        window.myPie2 = new Chart(o_ctx, o_config);
    };

</script>
{% endblock %}